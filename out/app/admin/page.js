(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},2224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(8748),s(1506),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8748)),"/home/pkw/small-business-tracker/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/home/pkw/small-business-tracker/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/pkw/small-business-tracker/app/admin/page.tsx"],x="/admin/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},826:()=>{},3510:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4933:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},8748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(9510),a=s(1700),n=s(6611),i=s(6815);function l(){return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(a.Z,{}),(0,r.jsxs)("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"어드민 대시보드"}),r.jsx("p",{className:"text-gray-600",children:"시스템 관리 및 데이터 동기화"})]}),r.jsx(o,{})]})]})}async function o(){let[e,t]=await Promise.all([fetch((0,i.U0)("/api/dashboard/stats"),{cache:"no-store"}),fetch((0,i.U0)("/api/sync/status"),{cache:"no-store"})]);if(!e.ok||!t.ok)throw Error("데이터를 불러오는데 실패했습니다.");let[s,a]=await Promise.all([e.json(),t.json()]);return(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsx(n.R,{title:"전체 소상공인",value:s.total,icon:"\uD83C\uDFEA"}),r.jsx(n.R,{title:"신규 등록",value:s.newRecords,icon:"\uD83C\uDD95"}),r.jsx(n.R,{title:"영업 중",value:s.active,icon:"✅"}),r.jsx(n.R,{title:"오늘 신규",value:s.newToday,icon:"\uD83D\uDCC5"}),r.jsx(d,{syncState:a}),r.jsx(c,{schedulerStatus:a}),r.jsx(x,{})]})}function d({syncState:e}){return(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow",children:[r.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"동기화 상태"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"상태"}),r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${{idle:"bg-gray-100 text-gray-800",running:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"}[e.syncStatus]||"bg-gray-100 text-gray-800"}`,children:e.syncStatus})]}),e.lastSyncedAt&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"마지막 동기화"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(e.lastSyncedAt).toLocaleString("ko-KR")})]}),e.errorMessage&&(0,r.jsxs)("div",{className:"text-sm text-red-600",children:["에러: ",e.errorMessage]})]})]})}function c({schedulerStatus:e}){return(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow",children:[r.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"스케줄러 상태"}),r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"실행 중"}),r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${e.running?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.running?"실행 중":"중지"})]})})]})}function x(){async function e(){try{let e=await fetch("/api/sync",{method:"POST"}),t=await e.json();t.success?(alert("동기화가 시작되었습니다."),window.location.reload()):alert(`동기화 실패: ${t.message}`)}catch(e){alert(`동기화 실패: ${e}`)}}return(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow",children:[r.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"수동 동기화"}),r.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"버튼을 클릭하여 공공데이터포털에서 데이터를 동기화합니다."}),r.jsx("button",{onClick:e,className:"w-full rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700",children:"동기화 시작"})]})}},1700:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(9510),a=s(7371);function n(){return r.jsx("nav",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[r.jsx(a.default,{href:"/",className:"text-xl font-bold text-gray-900",children:"\uD83C\uDFEA 소상공인 트래커"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(i,{href:"/",children:"홈"}),r.jsx(i,{href:"/businesses",children:"소상공인 목록"}),r.jsx(i,{href:"/new",children:"신규 등록"}),r.jsx(i,{href:"/admin",children:"어드민"})]})]})})})}function i({href:e,children:t}){return r.jsx(a.default,{href:e,className:"rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:t})}},6611:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});var r=s(9510),a=s(5761);function n({title:e,value:t,color:s="blue",icon:n}){return r.jsx("div",{className:(0,a.W)("rounded-lg p-6",{blue:"bg-blue-50 text-blue-700",green:"bg-green-50 text-green-700",yellow:"bg-yellow-50 text-yellow-700",purple:"bg-purple-50 text-purple-700"}[s]),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium",children:e}),r.jsx("p",{className:"mt-2 text-3xl font-bold",children:t.toLocaleString()})]}),n&&r.jsx("span",{className:"text-2xl",children:n})]})})}},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>a});var r=s(9510);s(7272);let a={title:"소상공인 정보 트래커",description:"공공데이터포털 소상공인 정보를 자동으로 수집하고 조회하는 웹앱"};function n({children:e}){return r.jsx("html",{lang:"ko",children:r.jsx("body",{className:"antialiased",children:e})})}},6815:(e,t,s)=>{"use strict";s.d(t,{U0:()=>a});let r=process.env.NEXTAUTH_URL||`http://localhost:${process.env.PORT||3001}`;function a(e){return`${r}${e}`}},7371:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(1812),a=s.n(r)},1812:(e,t,s)=>{"use strict";let{createProxy:r}=s(8570);e.exports=r("/home/pkw/small-business-tracker/node_modules/next/dist/client/link.js")},7481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(6621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{},5761:(e,t,s)=>{"use strict";function r(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=function e(t){var s,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=e(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=t);return r}s.d(t,{W:()=>r})}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,471,838],()=>s(2224));module.exports=r})();