name: 개발 환경

on:
  push:
    branches: [ develop ]
  pull_request:
    branches: [ develop ]

jobs:
  dev-environment-check:
    name: 개발 환경 확인
    runs-on: ubuntu-latest
    
    steps:
      - name: 코드 체크아웃
        uses: actions/checkout@v4
        
      - name: 환경 변수 확인
        run: |
          echo "DATABASE_URL 설정 확인: ${DATABASE_URL:0:50}"
          echo "NEXTAUTH_URL 설정 확인: ${NEXTAUTH_URL:0:50}"
          echo "NODE_ENV: ${NODE_ENV}"
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          NEXTAUTH_URL: ${{ secrets.NEXTAUTH_URL }}
          NODE_ENV: ${{ secrets.NODE_ENV }}
          
      - name: 개발 서버 테스트
        run: |
          echo "개발 서버 연결 테스트..."
          curl -f ${{ secrets.NEXTAUTH_URL }}/api/health || echo "Health check failed"
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          NEXTAUTH_URL: ${{ secrets.NEXTAUTH_URL }}
          NODE_ENV: ${{ secrets.NODE_ENV }}